{"version":3,"file":"polyfill-date-if-required-dynamic-import-3d89b165.mjs","sources":["../src/dateInputIsSupported.js","../src/FindInputsHelper.js","../src/polyfill-date-if-required-dynamic-import.js"],"sourcesContent":["const dateInputIsSupported = doesSupportDateInput();\r\n\r\nexport { dateInputIsSupported }\r\n\r\nfunction doesSupportDateInput() {\r\n  const input = document.createElement('input');\r\n  input.setAttribute('type', 'date');\r\n\r\n  const notADateValue = 'not-a-date';\r\n  input.setAttribute('value', notADateValue);\r\n  return input.value !== notADateValue;\r\n}\r\n","import { dateInputIsSupported } from './dateInputIsSupported.js';\r\nconst pickerAppliedAttr = 'data-has-picker';\r\nconst forcePickerAttr = 'data-nodep-date-input-polyfill-debug';\r\n\r\nclass FindInputsHelper {\r\n  constructor({ allowForcePicker = false} = {}) {\r\n    this.allowForcePicker = allowForcePicker;\r\n  }\r\n\r\n  requiresPolyfilling(el) {\r\n      return el && el.tagName === 'INPUT' && el.getAttribute('type') === 'date' && !el.hasAttribute(pickerAppliedAttr)\r\n          && (!dateInputIsSupported || (this.allowForcePicker && el.closest(`[${forcePickerAttr}]`) !== null));\r\n  }\r\n\r\n  getAllInputsForPolyfilling() {\r\n      // keeping logic in 1 place for now - see commented out code below for alternative\r\n      return Array.from(document.getElementsByTagName('input')).filter((el) => this.requiresPolyfilling(el)) \r\n        || [];\r\n      /*\r\n      if (supported) {\r\n        document.querySelectorAll(`input[type=\"date\"][${forcePicker}]:not([${pickerApplied}]), [${forcePicker}] input[type=\"date\"]:not([${pickerApplied}])`);\r\n      } else {\r\n        return document.querySelectorAll(`input[type=\"date\"]:not([${pickerApplied}])`);\r\n      }\r\n      */\r\n  }\r\n}\r\n\r\nexport { pickerAppliedAttr, forcePickerAttr, FindInputsHelper }\r\n","import { dateInputIsSupported } from './dateInputIsSupported.js';\r\nimport { forcePickerAttr } from './FindInputsHelper.js'\r\n\r\n// Run the above code on any <input type=\"date\"> in the document, also on dynamically created ones.\r\n// Check if type=\"date\" is supported.\r\nexport function polyfillDateIfRequired({ watchForInsert = false, allowForcePicker = false } = {}) {\r\n  if (dateInputIsSupported && !(allowForcePicker && document.querySelector(`[${forcePickerAttr}]`))) {\r\n    return Promise.resolve();\r\n  } else {\r\n    import('./addPickers.js').then((module) => {\r\n      return new Promise((resolve, _reject) => {\r\n        let pickerAdded = false;\r\n        const loaded = () => {\r\n          if (!pickerAdded) {\r\n            module.addPickers({ watchForInsert, allowForcePicker });\r\n            resolve();\r\n            pickerAdded = true;\r\n          }\r\n        }\r\n        if (document.readyState === 'complete') {\r\n          loaded();\r\n        } else {\r\n          document.addEventListener('DOMContentLoaded', loaded);\r\n          window.addEventListener('load', loaded);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}"],"names":[],"mappings":"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"}